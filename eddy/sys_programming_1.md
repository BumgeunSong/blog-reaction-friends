# System Programming

## 시스템 프로그래밍 VS 애플리케이션 프로그래밍

- 사실상 대부분의 개발자들은 애플리케이션 프로그래밍을 한다.
- 자바, 파이썬, 자바스크립트 같은 엉어들은 상위 레벨로 이동해서 애플리케이션 프로그래밍을 한다.
- 시스템 소프트웨어는 다른 (애플리케이션) 소프트웨어에게 서비스를 제공한다.
- 예를 들면, 아파치 웹서버, Vim이나 Emacs 같은 편집기, bash 쉘, gcc, ls 등이 있다.
- 시스템에서 제공하는 시스템 호출을 이용해 프로그램을 작성하는 것이다.
- 일반적인 애플리케이션 프로그래밍에서는 시스템 호출을 직접 하지 않는다.

## 시스템

‘시스템’은 하나의 목적을 달성하기 위한 하드웨어, 소프트웨어 자원을 묶어놓은 것이다.

## 시스템 콜

리눅스 운영체제가 제공하는 서비스를 생각해보자.

리눅스는 파일 시스템 접근, 사용자, 시스템 정보. 네트워킹 등 다양한 서비스를 제공한다.

**시스템 호출(System Call)**은 서비스를 이런 API로 제공한다.

시스템 콜을 통해 운영체제에게 요청을 하고, 하드웨어의 서비스를 애플리케이션에게 전달한다.

운영체제 (시스템 프로그램)이 제공하는 기능을 사용하기 위한 수단이다.

시스템 호출은 C 언어의 함수 형식이다. 호출명은 함수명처럼 사용할 이름이 정의돼있다. 

시스템 호출은 대부분, 호출의 성공이나 실패값을 알려주는 정수를 return한다.

## 시스템 소프트웨어

운영체제만 가지고 프로그램을 만드는 것은 쉬운 일이 아니다.

애플리케이션을 만들 때는 운영체제에 대고 직접 호출을 하면서 만드는 경우가 잘 없다.

대신 ‘자신이 시스템 호출을 직접 사용하되 다른 프로그램에게는 좀 더 쉽게 사용할 수 있는 추상화된 인터페이스를 제공하는 프로그램’을 사용한다.

이것을 시스템 소프트웨어라고 한다. 

어플리케이션과 운영체제를 중재해주는 유틸리티 역할을 한다.

## 시스템 프로그래밍

**시스템(을 구성하는 자원과 동작 원리)에 대해 이해**를 가지고하는 프로그래밍.

하위 시스템(자원)에 대한 이해가 있기 때문에 더 효율적인 프로그래밍을 할 수 있다.

## 라이브러리 함수

- 시스템 콜은 시스템 기능을 이용하는 통로다. 커널의 모듈을 직접 호출한다.
- 라이브러리 함수는 커널 모듈을 직접 호출하지 않는다.
- 라이브러리 함수는 시스템 콜을 사용해서 시스템을 다룬다. 시스템 콜을 사용해서 구현한 함수를 미리 컴파일해둔 것이다. 라이브러리 함수가 내부적으로 시스템 콜을 한다.
- 간접적으로 하나의 코드에 하나의 층이 추가된다고 할 수 있다.
- 자주 사용되는 기능을 구현해놓고 불러서 쓸 수 있다.
- 시스템 호출과 라이브러리 함수는 다른 것이지만, 사용 방법은 크게 다르지 않다.

## C 라이브러리

C 라이브러리 (libc) 는 유닉스 애플리케이션의 핵심이다. 최신 리눅스에서는 GNU C 라이브러리를 쓰는데 지립씨라고 읽는다.

## C 컴파일러

리눅스는 표준 C 컴파일러로 gcc를 사용한다. 

C 언어로 된 소스코드를 컴파일해서 컴퓨터에서 실행할 수 있는 기계어 파일로 만드는 소프트웨어다. 보통 컴파일에는 컴파일과 외부 라이브러리를 링크하는 과정까지를 포함해서 통칭한다.

## 시스템 프로그래밍의 3가지 주춧돌

1. 시스템 콜
2. C 라이브러리
3. C 컴파일러

## 왜 시스템 프로그래밍을 배워야 하는가?

- 더 효율적으로 프로그램을 구현할 수 있다. (중간 과정이 없기 때문에)
- 시스템 자원에 대한 이해가 높아진다. (파일, 프로세스, 시그널, 통신 인터페이스 등)

---

# 유닉스, 리눅스 운영체제 표준과 역사

## UNIX

유닉스는 AT&T 벨 연구소에서 켄 톰슨과 데니스 리치가 개발한 운영체제다. 유닉스는 처음에 어셈블리로 개발했지만, 데니스 리치가 만든 C 언어로 다시 만들었다.

유닉스는 (윈도우를 제외한) 현대 대부분 운영체제의 조상이라고 할 수 있다. 여러 계열로 나누어 발전했다.

먼저, 버클리 계열(Berkeley Software Distribution, BSD)이 있다. 나중에 넥스트 스텝, 그리고 MacOS와 iOS로 진화했다.

그 외에 상업용 유닉스인 `System V` 계열도 있다.

## Linux

또다른 중요한 계보는 **리눅스 쪽**이다. 유닉스 계열 운영체제이면서 교육 목적으로 제작된 미닉스(Minix)가 먼저 있었다.

리눅스는 그 유명한 리누스 토르발즈가 이 미닉스에서부터 만들었다. 리눅스는 리누스의 유닉스(Linus Unix)의 줄임말이다. 리눅스는 계속 발전해서 원탑 운영체제가 되었으며, 안드로이드가 리눅스 기반이다.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d56c45fc-b2cb-44d2-85a1-380257a6a70d/Untitled.png)

## C 언어 표준: ANSI

ANSI는 미국 표준협회다. ANSI가 정의한 표준이 C 언어의 국제 표준이다. C 언어의 문법, 라이브러리 , 헤더 파일을 정의한다. 

## 시스템 인터페이스 표준: POSIX & SUS

## POSIX

‘파직스'라고 읽는다. 유닉스 기반의 운영체제 인터페이스다. 유닉스 시스템의 공통적인 API를 정의한 표준이다. Portable Operating System Interface X

아까 말했듯이 유닉스에서 나온 운영체제는 매우 많다. 하지만 다 다른 운영체제라고 하더라도, 넓게 봐서 파직스를 따르면 유닉스 호환, 유닉스 계열의 운영체제라고 부른다. 

리눅스는 유닉스와는 다른 운영체제지만, POSIX 표준을 따르기 때문에 유닉스 계열이라고 할 수 있음. 

맥OS도 마찬가지로 POSIX를 따른다. 

따라서 POSIX는 유닉스 가족의 최소 조건을 정의한다고 할 수 있음.

## SUS

Single Unix Specification.

진짜 ‘유닉스’라는 이름을 사용하려면 지켜야 하는 표준이다. 유닉스의 시스템 인터페이스 콜을 표준화하기 위한 노력이다. 

→ 파직스와 SUS는 가장 중요하고 영향력있는 2개의 시스템 표준이다. 

→ 워낙 유닉스라는 운영체제가 다양한 버전과 코드로 발전되어오다보니까 이런 표준을 정해서 개발자들이 배우거나 사용하기 쉽도록 만드는 것 같다.

→ 유닉스가 하나의 언어라고 생각하면 다양한 지역 사투리와 버전이 있고, 딱히 표준어라는 게 없다보니까, 나중에 표준말을 차차 정하게 된 것이다.

→ 1990년대 초반에는 유닉스 업체들이 서로 자신의 유닉스 버전을 표준 유닉스로 정의하려고 ‘유닉스 전쟁'을 치렀다고 한다. 우여곡절 끝에 ‘표준 유닉스’가 된 승자가 바로 POSIX와 SUS다.

→ 리눅스는 이 2가지 표준 POSIX, SUS를 따르려고 노력한다.

→ POSIX와 SUS를 기준으로 시스템 프로그래밍을 배우면 된다는 말인듯. SUS는 최신 POSIX를 포함한다.

시스템 인터페이스는 매우 절대적이고 변하지 않는 강력한 표준이어서, 리눅스 커널 개발자들은 아무리 구현을 바꾸어도 이 인터페이스를 바꾸지 않으려고 엄청난 노력을 기울인다.